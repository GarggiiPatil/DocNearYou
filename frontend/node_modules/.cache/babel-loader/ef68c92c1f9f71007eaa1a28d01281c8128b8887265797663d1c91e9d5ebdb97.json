{"ast":null,"code":"// import React, { useState, useEffect, useRef } from 'react';\n// import { useNavigate } from 'react-router-dom';\n// import { toast } from 'react-toastify';\n// import { chatbotAPI } from '../services/api';\n\n// const HealthChatbot = () => {\n//   const navigate = useNavigate();\n//   const [messages, setMessages] = useState([\n//     {\n//       role: 'assistant',\n//       content: 'Hello! I\\'m your DOCNEARYOU health assistant. I can help you with general health information and guide you on when to see a doctor. How can I assist you today?',\n//       timestamp: new Date()\n//     }\n//   ]);\n//   const [input, setInput] = useState('');\n//   const [loading, setLoading] = useState(false);\n//   const [commonQuestions, setCommonQuestions] = useState([]);\n//   const messagesEndRef = useRef(null);\n\n//   useEffect(() => {\n//     fetchCommonQuestions();\n//   }, []);\n\n//   useEffect(() => {\n//     scrollToBottom();\n//   }, [messages]);\n\n//   const scrollToBottom = () => {\n//     messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n//   };\n\n//   const fetchCommonQuestions = async () => {\n//     try {\n//       const response = await chatbotAPI.getCommonQuestions();\n//       setCommonQuestions(response.data.data);\n//     } catch (err) {\n//       console.error('Error fetching common questions:', err);\n//     }\n//   };\n\n//   const sendMessage = async (messageText = input) => {\n//     if (!messageText.trim()) return;\n\n//     const userMessage = {\n//       role: 'user',\n//       content: messageText,\n//       timestamp: new Date()\n//     };\n\n//     setMessages(prev => [...prev, userMessage]);\n//     setInput('');\n//     setLoading(true);\n\n//     try {\n//       const conversationHistory = messages.map(msg => ({\n//         role: msg.role === 'assistant' ? 'model' : 'user',\n//         content: msg.content\n//       }));\n\n//       const response = await chatbotAPI.sendMessage(messageText, conversationHistory);\n\n//       const assistantMessage = {\n//         role: 'assistant',\n//         content: response.data.data.message,\n//         timestamp: new Date(),\n//         fallback: response.data.data.fallback\n//       };\n\n//       setMessages(prev => [...prev, assistantMessage]);\n//     } catch (err) {\n//       toast.error('Failed to get response');\n//       const errorMessage = {\n//         role: 'assistant',\n//         content: 'I apologize, but I\\'m having trouble connecting right now. Please try again later or contact a doctor directly.',\n//         timestamp: new Date(),\n//         error: true\n//       };\n//       setMessages(prev => [...prev, errorMessage]);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleQuestionClick = (question) => {\n//     sendMessage(question);\n//   };\n\n//   return (\n//     <div className=\"container\">\n//       <div className=\"dashboard\">\n//         <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>\n//           <h1>Health Assistant ChatBot!!</h1>\n//           <button className=\"btn btn-secondary\" onClick={() => navigate('/patient/dashboard')}>\n//             Back\n//           </button>\n//         </div>\n\n//         <div style={{ background: '#fff3cd', padding: '15px', borderRadius: '10px', marginBottom: '20px', border: '2px solid #ffc107' }}>\n//           <p style={{ margin: 0, fontSize: '14px' }}>\n//             <strong>⚠️ Disclaimer:</strong> This is an AI assistant for general health information only. \n//             For medical diagnosis and treatment, please consult with a qualified doctor.\n//           </p>\n//         </div>\n\n//         {commonQuestions.length > 0 && messages.length <= 1 && (\n//           <div style={{ marginBottom: '20px' }}>\n//             <h3>Common Questions:</h3>\n//             <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))', gap: '10px', marginTop: '10px' }}>\n//               {commonQuestions.map(q => (\n//                 <button\n//                   key={q.id}\n//                   onClick={() => handleQuestionClick(q.question)}\n//                   style={{\n//                     padding: '12px',\n//                     background: '#f5f5f5',\n//                     border: '2px solid #e1e8ed',\n//                     borderRadius: '8px',\n//                     cursor: 'pointer',\n//                     textAlign: 'left',\n//                     fontSize: '14px',\n//                     transition: 'all 0.3s'\n//                   }}\n//                   onMouseOver={(e) => e.currentTarget.style.background = '#e3f2fd'}\n//                   onMouseOut={(e) => e.currentTarget.style.background = '#f5f5f5'}\n//                 >\n//                   {q.question}\n//                 </button>\n//               ))}\n//             </div>\n//           </div>\n//         )}\n\n//         <div style={{\n//           background: 'white',\n//           borderRadius: '10px',\n//           border: '2px solid #e1e8ed',\n//           height: '500px',\n//           display: 'flex',\n//           flexDirection: 'column'\n//         }}>\n//           <div style={{\n//             flex: 1,\n//             overflowY: 'auto',\n//             padding: '20px',\n//             display: 'flex',\n//             flexDirection: 'column',\n//             gap: '15px'\n//           }}>\n//             {messages.map((msg, idx) => (\n//               <div\n//                 key={idx}\n//                 style={{\n//                   display: 'flex',\n//                   justifyContent: msg.role === 'user' ? 'flex-end' : 'flex-start'\n//                 }}\n//               >\n//                 <div style={{\n//                   maxWidth: '70%',\n//                   padding: '12px 16px',\n//                   borderRadius: '15px',\n//                   background: msg.role === 'user' ? '#667eea' : msg.error ? '#ffebee' : '#f5f5f5',\n//                   color: msg.role === 'user' ? 'white' : '#333'\n//                 }}>\n//                   <div style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\n//                     {msg.content}\n//                   </div>\n//                   <div style={{\n//                     fontSize: '11px',\n//                     marginTop: '5px',\n//                     opacity: 0.7\n//                   }}>\n//                     {msg.timestamp.toLocaleTimeString()}\n//                   </div>\n//                 </div>\n//               </div>\n//             ))}\n//             {loading && (\n//               <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\n//                 <div style={{\n//                   padding: '12px 16px',\n//                   borderRadius: '15px',\n//                   background: '#f5f5f5'\n//                 }}>\n//                   <span>Typing...</span>\n//                 </div>\n//               </div>\n//             )}\n//             <div ref={messagesEndRef} />\n//           </div>\n\n//           <div style={{\n//             padding: '15px',\n//             borderTop: '2px solid #e1e8ed',\n//             display: 'flex',\n//             gap: '10px'\n//           }}>\n//             <input\n//               type=\"text\"\n//               value={input}\n//               onChange={(e) => setInput(e.target.value)}\n//               onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\n//               placeholder=\"Ask me about your health concerns...\"\n//               style={{\n//                 flex: 1,\n//                 padding: '12px',\n//                 borderRadius: '25px',\n//                 border: '2px solid #e1e8ed',\n//                 fontSize: '14px'\n//               }}\n//               disabled={loading}\n//             />\n//             <button\n//               onClick={() => sendMessage()}\n//               disabled={loading || !input.trim()}\n//               style={{\n//                 padding: '12px 24px',\n//                 background: '#667eea',\n//                 color: 'white',\n//                 border: 'none',\n//                 borderRadius: '25px',\n//                 cursor: loading ? 'not-allowed' : 'pointer',\n//                 fontWeight: 'bold'\n//               }}\n//             >\n//               {loading ? '...' : 'Send'}\n//             </button>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default HealthChatbot;","map":{"version":3,"names":[],"sources":["C:/Users/GARGI/Downloads/docnearyou/frontend/src/pages/HealthChatbot.js"],"sourcesContent":["// import React, { useState, useEffect, useRef } from 'react';\r\n// import { useNavigate } from 'react-router-dom';\r\n// import { toast } from 'react-toastify';\r\n// import { chatbotAPI } from '../services/api';\r\n\r\n// const HealthChatbot = () => {\r\n//   const navigate = useNavigate();\r\n//   const [messages, setMessages] = useState([\r\n//     {\r\n//       role: 'assistant',\r\n//       content: 'Hello! I\\'m your DOCNEARYOU health assistant. I can help you with general health information and guide you on when to see a doctor. How can I assist you today?',\r\n//       timestamp: new Date()\r\n//     }\r\n//   ]);\r\n//   const [input, setInput] = useState('');\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [commonQuestions, setCommonQuestions] = useState([]);\r\n//   const messagesEndRef = useRef(null);\r\n\r\n//   useEffect(() => {\r\n//     fetchCommonQuestions();\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     scrollToBottom();\r\n//   }, [messages]);\r\n\r\n//   const scrollToBottom = () => {\r\n//     messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n//   };\r\n\r\n//   const fetchCommonQuestions = async () => {\r\n//     try {\r\n//       const response = await chatbotAPI.getCommonQuestions();\r\n//       setCommonQuestions(response.data.data);\r\n//     } catch (err) {\r\n//       console.error('Error fetching common questions:', err);\r\n//     }\r\n//   };\r\n\r\n//   const sendMessage = async (messageText = input) => {\r\n//     if (!messageText.trim()) return;\r\n\r\n//     const userMessage = {\r\n//       role: 'user',\r\n//       content: messageText,\r\n//       timestamp: new Date()\r\n//     };\r\n\r\n//     setMessages(prev => [...prev, userMessage]);\r\n//     setInput('');\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       const conversationHistory = messages.map(msg => ({\r\n//         role: msg.role === 'assistant' ? 'model' : 'user',\r\n//         content: msg.content\r\n//       }));\r\n\r\n//       const response = await chatbotAPI.sendMessage(messageText, conversationHistory);\r\n      \r\n//       const assistantMessage = {\r\n//         role: 'assistant',\r\n//         content: response.data.data.message,\r\n//         timestamp: new Date(),\r\n//         fallback: response.data.data.fallback\r\n//       };\r\n\r\n//       setMessages(prev => [...prev, assistantMessage]);\r\n//     } catch (err) {\r\n//       toast.error('Failed to get response');\r\n//       const errorMessage = {\r\n//         role: 'assistant',\r\n//         content: 'I apologize, but I\\'m having trouble connecting right now. Please try again later or contact a doctor directly.',\r\n//         timestamp: new Date(),\r\n//         error: true\r\n//       };\r\n//       setMessages(prev => [...prev, errorMessage]);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleQuestionClick = (question) => {\r\n//     sendMessage(question);\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"container\">\r\n//       <div className=\"dashboard\">\r\n//         <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>\r\n//           <h1>Health Assistant ChatBot!!</h1>\r\n//           <button className=\"btn btn-secondary\" onClick={() => navigate('/patient/dashboard')}>\r\n//             Back\r\n//           </button>\r\n//         </div>\r\n\r\n//         <div style={{ background: '#fff3cd', padding: '15px', borderRadius: '10px', marginBottom: '20px', border: '2px solid #ffc107' }}>\r\n//           <p style={{ margin: 0, fontSize: '14px' }}>\r\n//             <strong>⚠️ Disclaimer:</strong> This is an AI assistant for general health information only. \r\n//             For medical diagnosis and treatment, please consult with a qualified doctor.\r\n//           </p>\r\n//         </div>\r\n\r\n//         {commonQuestions.length > 0 && messages.length <= 1 && (\r\n//           <div style={{ marginBottom: '20px' }}>\r\n//             <h3>Common Questions:</h3>\r\n//             <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(250px, 1fr))', gap: '10px', marginTop: '10px' }}>\r\n//               {commonQuestions.map(q => (\r\n//                 <button\r\n//                   key={q.id}\r\n//                   onClick={() => handleQuestionClick(q.question)}\r\n//                   style={{\r\n//                     padding: '12px',\r\n//                     background: '#f5f5f5',\r\n//                     border: '2px solid #e1e8ed',\r\n//                     borderRadius: '8px',\r\n//                     cursor: 'pointer',\r\n//                     textAlign: 'left',\r\n//                     fontSize: '14px',\r\n//                     transition: 'all 0.3s'\r\n//                   }}\r\n//                   onMouseOver={(e) => e.currentTarget.style.background = '#e3f2fd'}\r\n//                   onMouseOut={(e) => e.currentTarget.style.background = '#f5f5f5'}\r\n//                 >\r\n//                   {q.question}\r\n//                 </button>\r\n//               ))}\r\n//             </div>\r\n//           </div>\r\n//         )}\r\n\r\n//         <div style={{\r\n//           background: 'white',\r\n//           borderRadius: '10px',\r\n//           border: '2px solid #e1e8ed',\r\n//           height: '500px',\r\n//           display: 'flex',\r\n//           flexDirection: 'column'\r\n//         }}>\r\n//           <div style={{\r\n//             flex: 1,\r\n//             overflowY: 'auto',\r\n//             padding: '20px',\r\n//             display: 'flex',\r\n//             flexDirection: 'column',\r\n//             gap: '15px'\r\n//           }}>\r\n//             {messages.map((msg, idx) => (\r\n//               <div\r\n//                 key={idx}\r\n//                 style={{\r\n//                   display: 'flex',\r\n//                   justifyContent: msg.role === 'user' ? 'flex-end' : 'flex-start'\r\n//                 }}\r\n//               >\r\n//                 <div style={{\r\n//                   maxWidth: '70%',\r\n//                   padding: '12px 16px',\r\n//                   borderRadius: '15px',\r\n//                   background: msg.role === 'user' ? '#667eea' : msg.error ? '#ffebee' : '#f5f5f5',\r\n//                   color: msg.role === 'user' ? 'white' : '#333'\r\n//                 }}>\r\n//                   <div style={{ whiteSpace: 'pre-wrap', wordBreak: 'break-word' }}>\r\n//                     {msg.content}\r\n//                   </div>\r\n//                   <div style={{\r\n//                     fontSize: '11px',\r\n//                     marginTop: '5px',\r\n//                     opacity: 0.7\r\n//                   }}>\r\n//                     {msg.timestamp.toLocaleTimeString()}\r\n//                   </div>\r\n//                 </div>\r\n//               </div>\r\n//             ))}\r\n//             {loading && (\r\n//               <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\r\n//                 <div style={{\r\n//                   padding: '12px 16px',\r\n//                   borderRadius: '15px',\r\n//                   background: '#f5f5f5'\r\n//                 }}>\r\n//                   <span>Typing...</span>\r\n//                 </div>\r\n//               </div>\r\n//             )}\r\n//             <div ref={messagesEndRef} />\r\n//           </div>\r\n\r\n//           <div style={{\r\n//             padding: '15px',\r\n//             borderTop: '2px solid #e1e8ed',\r\n//             display: 'flex',\r\n//             gap: '10px'\r\n//           }}>\r\n//             <input\r\n//               type=\"text\"\r\n//               value={input}\r\n//               onChange={(e) => setInput(e.target.value)}\r\n//               onKeyPress={(e) => e.key === 'Enter' && sendMessage()}\r\n//               placeholder=\"Ask me about your health concerns...\"\r\n//               style={{\r\n//                 flex: 1,\r\n//                 padding: '12px',\r\n//                 borderRadius: '25px',\r\n//                 border: '2px solid #e1e8ed',\r\n//                 fontSize: '14px'\r\n//               }}\r\n//               disabled={loading}\r\n//             />\r\n//             <button\r\n//               onClick={() => sendMessage()}\r\n//               disabled={loading || !input.trim()}\r\n//               style={{\r\n//                 padding: '12px 24px',\r\n//                 background: '#667eea',\r\n//                 color: 'white',\r\n//                 border: 'none',\r\n//                 borderRadius: '25px',\r\n//                 cursor: loading ? 'not-allowed' : 'pointer',\r\n//                 fontWeight: 'bold'\r\n//               }}\r\n//             >\r\n//               {loading ? '...' : 'Send'}\r\n//             </button>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default HealthChatbot;"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}